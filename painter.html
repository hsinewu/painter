<style>
    #app {
        width: 100%;
        height: 100%;
        background-color: #eee;
    }
    canvas {
        border: 1px solid #000;
        background-color: #fff;
    }

</style>

<div id="app">
    <canvas id="canvas" width="900" height="600"></canvas>
</div>

<script>

    var drawMode = 'pen';

    var mouse = {
        x: 0,
        y: 0,
        isDown: false,
    };

    var pen = {
        x: 0,
        y: 0,
        drawTo(x, y) {

            if(!mouse.isDown) return;

            ctx.beginPath();
            ctx.moveTo(this.x, this.y);
            ctx.lineTo(x, y);
            ctx.stroke();

            this.x = x;
            this.y = y;

        },
    };

    function main() {

        var canvas = document.getElementById('canvas');
        ctx = canvas.getContext('2d');
        canvas.onmousemove = updateMouse;
        canvas.onmousedown = _ => { mouse.isDown = true; updateMouse(_); pen.x = mouse.x; pen.y = mouse.y;};
        canvas.onmouseup = _=> { mouse.isDown = false; };
        
        requestAnimationFrame(paint);
    }

    function updateMouse(event) {

        mouse.x = event.clientX - event.target.offsetLeft;
        mouse.y = event.clientY - event.target.offsetTop;
    }

    function paint() {

        if(mouse.isDown) {

            if(drawMode == 'pen')
                pen.drawTo(mouse.x, mouse.y);
        }

        requestAnimationFrame(paint);        
    }

    window.onload = main;
</script>
